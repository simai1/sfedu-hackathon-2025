# NeuroSensor WebSocket API

WebSocket API для получения данных с датчиков BrainBit и определенных эмоций.

## Описание

Этот API предоставляет доступ к данным с датчиков BrainBit через WebSocket соединение. API включает в себя:

- Данные с датчиков (O1, O2, T3, T4)
- Определенные эмоции на основе ментальных данных
- Спектральные данные (дельта, тета, альфа, бета, гамма волны)
- Ментальные данные (внимание, расслабление)

## Установка

1. Убедитесь, что у вас установлен Python 3.7 или выше
2. Установите зависимости:
   ```
   pip install -r requirements.txt
   ```

## Запуск сервера

```
python api/server.py
```

Сервер запустится на `localhost:8766`.

## WebSocket эндпоинт

- **URL**: `ws://localhost:8766`
- **Метод**: WebSocket

## Формат данных

Сервер отправляет JSON сообщения следующего формата:

```json
{
  "type": "sensor_data",
  "data": {
    "sensor_data": {
      "O1": 15.23,
      "O2": 18.45,
      "T3": 12.67,
      "T4": 16.89,
      "timestamp": 1640995200
    },
    "emotion": "relaxed",
    "mental_data": {
      "attention": 35.2,
      "relaxation": 68.7,
      "detected_emotion": "расслабленное",
      "emulated_emotion": "relaxed"
    },
    "spectral_data": {
      "delta": 15.3,
      "theta": 22.1,
      "alpha": 35.7,
      "beta": 20.4,
      "gamma": 6.5
    }
  }
}
```

## CORS конфигурация

API поддерживает CORS для следующих origins:

- `http://localhost:3000`
- `http://localhost:8080`
- `http://127.0.0.1:3000`
- `http://127.0.0.1:8080`
- `https://localhost:3000`
- `https://localhost:8080`
- `*` (все origins)

## Тестирование

Для тестирования API можно использовать встроенный HTML клиент:

1. Откройте файл `api/client.html` в браузере
2. Нажмите кнопку "Подключиться к серверу"
3. Данные будут обновляться в реальном времени

## Структура проекта

```
api/
├── __init__.py
├── server.py          # Основной сервер WebSocket
├── cors.py            # CORS конфигурация
├── client.html        # Тестовый клиент
└── requirements.txt   # Зависимости
```

## Эмоции

API определяет следующие эмоции на основе ментальных данных:

1. **Нейтральное** - базовое состояние
2. **Расслабленное** - высокий уровень расслабления, низкий уровень внимания
3. **Сосредоточенное** - высокий уровень внимания, низкий уровень расслабления
4. **Возбужденное** - высокий уровень как внимания, так и расслабления
5. **Сонное** - низкий уровень как внимания, так и расслабления

## Лицензия

MIT
